!function($){$.fn.menuFlex=function(){$(this).each(function(){function e(){var e=0;return l.find("> li").each(function(){e+=$(this).width()}),e}function n(){for(menuItems=l.find("> li:not(.menuFlexBtn)"),0==l.find(".menuFlexBtn").length&&e()>s&&i(),d=menuItems.length-1;d>=0;d--)e()>s&&(c.unshift($(menuItems[d]).width()),$(menuItems[d]).prependTo(a))}function t(){for(0!=a.length?!0:!1,o=a.find("> li"),btnWidth=l.find(".menuFlexBtn").width(),d=0;d<=o.length-1;d++)1==c.length&&e()-btnWidth+c[0]<s&&($(o[d]).insertBefore(f),c.shift(0),f.remove(),l.removeClass("menuFlex")),e()+c[0]<s&&($(o[d]).insertBefore(f),c.shift(0))}function i(){l.append('<li class="menuFlexBtn"><a href="#" title="" class="menuFlexBtnText">•••</a><ul class="menuFlexPopup"></ul></li>'),a=l.find(".menuFlexPopup"),f=l.find(".menuFlexBtn"),l.addClass("menuFlex"),f.on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).hasClass("active")?($(this).removeClass("active"),a.slideUp(100)):($(".menuFlexPopup").slideUp(100),$(".menuFlexBtn").removeClass("active"),$(this).addClass("active"),a.slideDown(100))}),a.on("click",function(e){e.stopPropagation()}),$(window).on("click",function(e){$(".menuFlexPopup").slideUp(100),$(".menuFlexBtn").removeClass("active")})}var l=$(this),s=l.width(),u,o,a,f,c=[],d;e()>s&&n(),$(window).on("resize",function(){l.width()<s&&(s=l.width(),n()),l.width()>s&&(s=l.width(),setTimeout(function(){t()},50))})})}}(jQuery);